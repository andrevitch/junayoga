// Hamburger/Fixed Navbar
document.addEventListener("DOMContentLoaded", () => {
  const menu = document.querySelector(".menu");
  const menuItem = document.querySelectorAll(".menu_item");
  const hamburger = document.querySelector(".hamburger");
  const body = document.body;

  // Mobile Dropdown Menu
  const dropdown = document.querySelector(".dropdown");
  const dropbtn = document.querySelector(".dropbtn");
  const dropdownContent = document.querySelector(".dropdown-content");
  const dropdownLinks = document.querySelectorAll(".dropdown-link");

  dropbtn.addEventListener("click", function (e) {
    e.preventDefault();
    dropdownContent.classList.toggle("show");
  });

  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();

      const targetId = this.getAttribute("href");
      const targetElement = document.querySelector(targetId);

      window.scrollTo({
        top: targetElement.offsetTop - navbarHeight,
        behavior: "smooth",
      });

      // Hide dropdown menu after clicking a link
      dropdownContent.classList.remove("show");
    });
  });

  // Close the dropdown if clicked outside of it
  document.addEventListener("click", function (event) {
    if (!dropdown.contains(event.target)) {
      dropdownContent.classList.remove("show");
    }
  });

  // Fixed Navbar Offset
  const navbarHeight = document.querySelector(".navbar").offsetHeight;

  document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
    anchor.addEventListener("click", function (e) {
      e.preventDefault();

      const targetId = this.getAttribute("href");
      const targetElement = document.querySelector(targetId);

      window.scrollTo({
        top: targetElement.offsetTop - navbarHeight,
        behavior: "smooth",
      });
    });
  });

  // Hamburger Menu
  hamburger.addEventListener("click", () => {
    hamburger.classList.toggle("hamburger_active"),
      menu.classList.toggle("menu_active");
    body.classList.toggle("no-scroll");
  }),
    menuItem.forEach((item) => {
      item.addEventListener("click", () => {
        hamburger.classList.toggle("hamburger_active"),
          menu.classList.toggle("menu_active");
        body.classList.remove("no-scroll");
      });
    }),
    dropdownLinks.forEach((item) => {
      item.addEventListener("click", () => {
        hamburger.classList.toggle("hamburger_active"),
          menu.classList.toggle("menu_active");
        body.classList.remove("no-scroll");
      });
    });
});

// Top Scroll
// When the user scrolls down 900px from the top of the document, show the button
const scrollToTopBtn = document.querySelector(".pageup");
const navbarFluid = document.querySelector(".navbar-fluid");

window.onscroll = function () {
  const scrollTop =
    document.body.scrollTop || document.documentElement.scrollTop;

  scrollToTopBtn.style.display = scrollTop > 900 ? "block" : "none";
  navbarFluid.style.backgroundColor =
    scrollTop > 300 ? "rgba(252, 251, 250, 1)" : "rgba(252, 251, 250, 0.9)";
};

// Smooth scrolling
scrollToTopBtn.addEventListener("click", function () {
  window.scrollTo({
    top: 0,
    behavior: "smooth",
  });
});
